# Содержание репозитория
**Movie_Knowledge_Graph**: скрипты для сбора данных, построения графа знаний и работы с ним;
 - **Wikidata**: извлечение данных из Wikidata;
     - **getIMDbID.py**: получение IMDb ID фильмов;
 - **IMDb_PY**: извлечение дополнительных данных с помощью библиотеки IMDbPY;
     - **getNotFound_IMDbID.py**: поиск и сохранение пропущенных IMDb ID фильмов по названию и году выпуска;
     - **getMoreInfo.py**: сбор и сохранение дополнительной информации о фильмах (блоками);
 - **Scripts**: для работы с уже собранными наборами данных;
    - **trimToNLines.py**: обрезать набор данных до n строк (фильмов);
    - **getNRandomMovies.py**: извлечь n рандомных строк (фильмов) из полного датасета (для экспериментов);
    - **cutRating.py**: убрать из полного набора рейтингов фильмы, которых нет в укороченном датасете;
    - **dataProcessing_func.py**: функции для обработки исходного набора данных - присоединение новых столбцов, замена 'IMDb_Id' на 'movieId', разделение строковых атрибутов, проверка на None и пустые значения, удаление дубликатов;
    - **dataProcessing.py**: скрипт для обработки атрибутов на пропуски, разделения многозначных атрибутов и преобразования в отдельные датасеты;
    - **getVertexEdge_func.py**: функции для создания вершин (фильмов и их атрибутов) и ребер (связей между вершинами) графа знаний;
    - **getVertex.py**: создание файла с вершинами (фильмы и их атрибуты) графа знаний для визуализации и построения эмбеддингов;
    - **getEdge.py**: создание файла с ребрами (фильмы и их атрибуты) графа знаний для визуализации и построения эмбеддингов;
 
 - **Rescal**: построение эмбеддингов с помощью Rescal;
 - **Node2Vec**: построение эмбеддингов с помощью Node2Vec;
     - 
   
**Datasets**: исходные и сгенерированные наборы данных о фильмах, используемые для создания эмбеддингов, обучения и тестирования рекомендательных систем; ссылка

**Recommender_Systems**: рекомендательные системы;

**Experiments**: скрипты и данные (промежуточные вычисления, оценка затрат памяти и времени, метрики и графики), связанные с проведение экспериментов;

**additionalFunctions.py**: скрипт для выполнения частых операций: проверка существования файла, директории; вычисление затрат памяти и времени; сохранение данных, моделей.



# Порядок запуска скриптов
1. Сбор датасета в директории Movie_Knowledge_Graph/Wikidata:
   1. getIMDbID.py
   2. getNotFound_IMDbID.py
   3. getMoreInfo.py
* можно пропустить и скачать готовый датасет:
  
2. Обработка датасета в директории Movie_Knowledge_Graph/Scripts: - опционально
  1. trimToNLines.py ИЛИ getNRandomMovies.py ИЛИ оставить исходную длину;
  2. dataProcessing_func.py
  3. dataProcessing.py
  4. addAttribute.py - опционально
  5. getVertex.py
  6. getEdge.py
* можно пропустить и скачать готовый датасет:
  
3. Построение эмбеддингов:



- **Построение эмбеддингов**: Desktop/ВКР/BKR/**Knowledge_Graph/Node2Vec**/эмбеддинги_Node2Vec.ipynb -> пишется
- **Рекомендательная система для 1 эксперимента:** Desktop/ВКР/BKR/**Experiments/M1**/M1.ipynb -> дописать



# **Содержание датасетов:**
- **movies.csv**: самый большой датасет фильмов IMDb 25m (65k строк), содержащий только основные поля (movieId, title, genres); сторонний источник.
- **ratings.csv**: набор данных оценок фильмов пользователей от MovieLens, содержащий только основные поля (userId, movieId, rating, timestamp); сторонний источник.
- **wikidata**: датасеты для извлечение данных из Wikidata;
    - **headers_id.csv**: датасет, сгенерированный с помощью http-запросов к Wikidata, где известные (title, releaseYear) or (originalTitle, releaseYear) фильма используются для получения его imdb id. Включает в себя и те фильмы, для которых id найдено не было. Также такие фильмы представлены в временном файле **not_found_id.csv**. Пропуски планируется закрывать с помощью обращения к БД IMDB или запросов к DBpedia. Фильмы ID которых не были определены ни в одном из источник, вероятнее всего, будут удалены.
- **more_info**: наборы данных атрибутов фильмов:
    - **genres.csv**: movieId, genres;
    - **id.csv**: movieId, IMDb_Id, tt_IMDb_Id;
    - **keys_dict.csv**: IMDb_Id, cast, director, producer, writer, stars, countries, rating, votes, top 250 rank, plot, runtimes;
    - **titles.csv**: movieId, fullTitle, title;
    - **years.csv**: movieId, releaseYear;
- **cut**: укороченные датасеты фильмов (в результате использования trimToNLines.py);
- **random**: укороченные датасеты фильмов (в результате использования getNRandomMovies.py);
- **cutRatings**: укороченные датасеты рейтингов (в результате использования cutRating.py);
- **merged**: объединенные датасеты фильмов (фильмы + доп. атрибуты) (в результате использования dataProcessing.py, addAttribute.py);
- **visualization_vertex_edge**: файлы .csv с вершинами и ребрами ГЗ;
- **emb_data**: представление графа знаний в векторном пространстве:
    - **директория_название_датасета**:
        - **emb**: эмбеддинги, в качестве имени - используемая комбинация параметров;
        - **model**: модели, соответствующие эмбеддингам;
        - **temp_folder**: требование Node2Vec;
- ?


